version: '3.8'

services:
  gateway:
    build:
      context: .
      dockerfile: docker/gateway.Dockerfile
    ports:
      - '3000:3000'
    env_file:
      - ./env/.gateway.env
    depends_on:
      - user-ms
      - auth-ms

  user-ms:
    build:
      context: .
      dockerfile: docker/user-ms.Dockerfile
    env_file:
      - ./env/.user-ms.env
    expose:
      - '4001'

  auth-ms:
    build:
      context: .
      dockerfile: docker/auth-ms.Dockerfile
    env_file:
      - ./env/.auth-ms.env
    expose:
      - '4000'
